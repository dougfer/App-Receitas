{"ast":null,"code":"import _defineProperty from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useContext}from'react';import RecipeContext from'../context/RecipeContext';function IngredientsCheckbox(_ref){var objDetail=_ref.objDetail,id=_ref.id,url=_ref.url;var _useContext=useContext(RecipeContext),setVerifyCheckbox=_useContext.setVerifyCheckbox;var verifyIngredientsChecked=function verifyIngredientsChecked(){if(localStorage.getItem('inProgressRecipes')!==null){var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(url.includes('comida')){return inProgressRecipes.meals[id];}if(url.includes('bebida')){return inProgressRecipes.cocktails[id];}}else{return['textoaleatorio'];}};var verifyCheckbox=function verifyCheckbox(_ref2){var target=_ref2.target;var array=[];var arrayLi=target.parentNode.parentNode.parentNode.childNodes;arrayLi.forEach(function(elem){var checkbox=elem.firstChild.firstChild;if(checkbox.checked){array.push(true);}else{array.push(false);}});// console.log(array);\nsetVerifyCheckbox(array);};var handleChange=function handleChange(_ref3){var target=_ref3.target;var ol=target.parentNode.parentNode.parentNode;var lista=ol.childNodes;var listaDeIngredientes=[];// console.log(ol);\nlista.forEach(function(elem){var checkbox=elem.firstChild.firstChild;// console.log(checkbox);\nif(checkbox.checked){listaDeIngredientes.push(checkbox.id);}});// console.log(listaDeIngredientes);\nif(localStorage.getItem('inProgressRecipes')!==null){var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(url.includes('comidas')){localStorage.setItem('inProgressRecipes',JSON.stringify(_objectSpread(_objectSpread({},inProgressRecipes),{},{meals:_objectSpread(_objectSpread({},inProgressRecipes.meals),{},_defineProperty({},id,listaDeIngredientes))})));}if(url.includes('bebidas')){localStorage.setItem('inProgressRecipes',JSON.stringify(_objectSpread(_objectSpread({},inProgressRecipes),{},{cocktails:_objectSpread(_objectSpread({},inProgressRecipes.cocktails),{},_defineProperty({},id,listaDeIngredientes))})));}}else{if(url.includes('comidas')){localStorage.setItem('inProgressRecipes',JSON.stringify({meals:_defineProperty({},id,listaDeIngredientes)}));}if(url.includes('bebidas')){localStorage.setItem('inProgressRecipes',JSON.stringify({cocktails:_defineProperty({},id,listaDeIngredientes)}));}}var SELECTED_LI='selected-li';if(!target.checked){target.parentNode.classList.remove(SELECTED_LI);}else{target.parentNode.classList.add(SELECTED_LI);}};var getIngredients=function getIngredients(){var ingredientes=Object.entries(objDetail[0]);var measure=ingredientes.filter(function(elem){return elem[0].includes('strMeasure')&&elem[1]!==null&&elem[1]!=='';});var filtering=ingredientes.filter(function(element){return element[0].includes('strIngredient')&&element[1]!==null&&element[1]!=='';});var results=filtering.map(function(elem,index){var isChecked=verifyIngredientsChecked().some(function(e){return e===elem[1];});return/*#__PURE__*/React.createElement(\"li\",{name:\"li-ingredients\",key:elem[1],\"data-testid\":\"\".concat(index,\"-ingredient-step\")},/*#__PURE__*/React.createElement(\"label\",{htmlFor:elem[1],className:isChecked?'selected-li':''},/*#__PURE__*/React.createElement(\"input\",{defaultChecked:isChecked,onChange:handleChange,type:\"checkbox\",id:elem[1]}),elem[1],/*#__PURE__*/React.createElement(\"span\",null,measure[index]===undefined?'':measure[index][1])));});return results;};return/*#__PURE__*/React.createElement(\"ol\",{onChange:verifyCheckbox,className:\"ingredient-list\",id:\"ingredient-list\"},getIngredients());}export default IngredientsCheckbox;","map":{"version":3,"sources":["/home/douglas/Área de Trabalho/Projetos em geral/App-Receitas/src/components/IngredientsCheckbox.js"],"names":["React","useContext","RecipeContext","IngredientsCheckbox","objDetail","id","url","setVerifyCheckbox","verifyIngredientsChecked","localStorage","getItem","inProgressRecipes","JSON","parse","includes","meals","cocktails","verifyCheckbox","target","array","arrayLi","parentNode","childNodes","forEach","elem","checkbox","firstChild","checked","push","handleChange","ol","lista","listaDeIngredientes","setItem","stringify","SELECTED_LI","classList","remove","add","getIngredients","ingredientes","Object","entries","measure","filter","filtering","element","results","map","index","isChecked","some","e","undefined"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport RecipeContext from '../context/RecipeContext';\n\nfunction IngredientsCheckbox({ objDetail, id, url }) {\n  const { setVerifyCheckbox } = useContext(RecipeContext);\n  const verifyIngredientsChecked = () => {\n    if (localStorage.getItem('inProgressRecipes') !== null) {\n      const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n      if (url.includes('comida')) {\n        return inProgressRecipes.meals[id];\n      }\n      if (url.includes('bebida')) {\n        return inProgressRecipes.cocktails[id];\n      }\n    } else { return ['textoaleatorio']; }\n  };\n\n  const verifyCheckbox = ({ target }) => {\n    const array = [];\n    const arrayLi = target.parentNode.parentNode.parentNode.childNodes;\n    arrayLi.forEach((elem) => {\n      const checkbox = elem.firstChild.firstChild;\n      if (checkbox.checked) {\n        array.push(true);\n      } else {\n        array.push(false);\n      }\n    });\n    // console.log(array);\n    setVerifyCheckbox(array);\n  };\n\n  const handleChange = ({ target }) => {\n    const ol = target.parentNode.parentNode.parentNode;\n    const lista = ol.childNodes;\n    const listaDeIngredientes = [];\n    // console.log(ol);\n\n    lista.forEach((elem) => {\n      const checkbox = elem.firstChild.firstChild;\n      // console.log(checkbox);\n      if (checkbox.checked) {\n        listaDeIngredientes.push(checkbox.id);\n      }\n    });\n\n    // console.log(listaDeIngredientes);\n    if (localStorage.getItem('inProgressRecipes') !== null) {\n      const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n      if (url.includes('comidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          ...inProgressRecipes,\n          meals: {\n            ...inProgressRecipes.meals,\n            [id]: listaDeIngredientes,\n          },\n        }));\n      }\n      if (url.includes('bebidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          ...inProgressRecipes,\n          cocktails: {\n            ...inProgressRecipes.cocktails,\n            [id]: listaDeIngredientes,\n          },\n        }));\n      }\n    } else {\n      if (url.includes('comidas')) {\n        localStorage.setItem(\n          'inProgressRecipes', JSON.stringify({ meals: { [id]: listaDeIngredientes } }),\n        );\n      }\n      if (url.includes('bebidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify(\n          { cocktails: { [id]: listaDeIngredientes } },\n        ));\n      }\n    }\n    const SELECTED_LI = 'selected-li';\n    if (!target.checked) {\n      target.parentNode.classList.remove(SELECTED_LI);\n    } else { target.parentNode.classList.add(SELECTED_LI); }\n  };\n  const getIngredients = () => {\n    const ingredientes = Object.entries(objDetail[0]);\n\n    const measure = ingredientes.filter((elem) => (\n      elem[0].includes('strMeasure') && elem[1] !== null && elem[1] !== ''\n    ));\n    const filtering = ingredientes.filter((element) => (\n      element[0].includes('strIngredient') && element[1] !== null && element[1] !== ''));\n\n    const results = filtering.map((elem, index) => {\n      const isChecked = verifyIngredientsChecked().some((e) => e === elem[1]);\n      return (\n        <li\n          name=\"li-ingredients\"\n          key={ elem[1] }\n          data-testid={ `${index}-ingredient-step` }\n        >\n          <label\n            htmlFor={ elem[1] }\n            className={ isChecked ? 'selected-li' : '' }\n          >\n            <input\n              defaultChecked={ isChecked }\n              onChange={ handleChange }\n              type=\"checkbox\"\n              id={ elem[1] }\n            />\n            {elem[1]}\n            <span>{measure[index] === undefined ? '' : measure[index][1]}</span>\n          </label>\n        </li>);\n    });\n\n    return results;\n  };\n\n  return (\n    <ol\n      onChange={ verifyCheckbox }\n      className=\"ingredient-list\"\n      id=\"ingredient-list\"\n    >\n      {getIngredients()}\n    </ol>\n  );\n}\n\nIngredientsCheckbox.propTypes = {\n  id: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  objDetail: PropTypes.shape(\n    PropTypes.any,\n  ).isRequired,\n};\n\nexport default IngredientsCheckbox;\n"]},"metadata":{},"sourceType":"module"}