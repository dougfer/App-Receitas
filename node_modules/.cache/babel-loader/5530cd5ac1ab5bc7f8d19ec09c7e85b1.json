{"ast":null,"code":"import _regeneratorRuntime from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{useHistory}from'react-router-dom';import'../styles/Detalhes.css';import{CopyToClipboard}from'react-copy-to-clipboard';import shareIcon from\"../images/shareIcon.svg\";import Loading from'../components/Loading';import RecipeContext from'../context/RecipeContext';import LinkCopiado from'../components/LinkCopiado';import ButtonFinish from'../components/ButtonFinish';import IngredientsCheckbox from'../components/IngredientsCheckbox';import FavoriteBtn from'../components/FavoriteBtn';function DetalhesInProgress(){var TWO_SECONDS=2000;var history=useHistory();var urlText=history.location.pathname;var urlDetails=urlText.split('/in-progress');console.log(urlDetails[0]);var id=urlText.split('/')[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),objDetail=_useState2[0],setObjDetail=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];console.log(objDetail);var _useContext=useContext(RecipeContext),setCopied=_useContext.setCopied;var requestByID=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseJson,_responseJson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:response=[];if(!urlText.includes('bebidas')){_context.next=10;break;}_context.next=4;return fetch(\"https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=\".concat(id));case 4:response=_context.sent;_context.next=7;return response.json();case 7:responseJson=_context.sent;_context.next=10;return setObjDetail(responseJson.drinks);case 10:if(!urlText.includes('comidas')){_context.next=19;break;}_context.next=13;return fetch(\"https://www.themealdb.com/api/json/v1/1/lookup.php?i=\".concat(id));case 13:response=_context.sent;_context.next=16;return response.json();case 16:_responseJson=_context.sent;_context.next=19;return setObjDetail(_responseJson.meals);case 19:setTimeout(function(){setLoading(false);},TWO_SECONDS);case 20:case\"end\":return _context.stop();}}},_callee);}));return function requestByID(){return _ref.apply(this,arguments);};}();var handleCopied=function handleCopied(){setCopied(true);setTimeout(function(){setCopied(false);},TWO_SECONDS);};useEffect(function(){requestByID();},[]);var renderDrink=function renderDrink(){return/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"h1\",{\"data-testid\":\"recipe-category\"},\"\".concat(objDetail[0].strCategory,\" (\").concat(objDetail[0].strAlcoholic,\")\")),/*#__PURE__*/React.createElement(\"h2\",{\"data-testid\":\"recipe-title\"},objDetail[0].strDrink),/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"recipe-photo\",className:\"food-image\",src:objDetail[0].strDrinkThumb,alt:objDetail[0].strDrink}),/*#__PURE__*/React.createElement(\"div\",{className:\"icons\"},/*#__PURE__*/React.createElement(CopyToClipboard,{text:\"http://localhost:3000\".concat(urlDetails[0]),onCopy:function onCopy(){handleCopied();}},/*#__PURE__*/React.createElement(\"input\",{type:\"image\",\"data-testid\":\"share-btn\",src:shareIcon,alt:objDetail[0].strDrink})),/*#__PURE__*/React.createElement(LinkCopiado,null),/*#__PURE__*/React.createElement(FavoriteBtn,{urlText:urlText,objDetail:objDetail,id:id})),/*#__PURE__*/React.createElement(IngredientsCheckbox,{objDetail:objDetail,id:id,url:urlText}),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"instructions\"},objDetail[0].strInstructions),/*#__PURE__*/React.createElement(ButtonFinish,{objDetail:objDetail}));};var renderFood=function renderFood(){return/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"h1\",{\"data-testid\":\"recipe-category\"},objDetail[0].strCategory),/*#__PURE__*/React.createElement(\"h2\",{\"data-testid\":\"recipe-title\"},objDetail[0].strMeal),/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"recipe-photo\",src:objDetail[0].strMealThumb,alt:objDetail[0].strMeal}),/*#__PURE__*/React.createElement(\"div\",{className:\"icons\"},/*#__PURE__*/React.createElement(CopyToClipboard,{text:\"http://localhost:3000\".concat(urlDetails[0]),onCopy:function onCopy(){handleCopied();}},/*#__PURE__*/React.createElement(\"input\",{type:\"image\",\"data-testid\":\"share-btn\",src:shareIcon,alt:objDetail[0].strMeal})),/*#__PURE__*/React.createElement(LinkCopiado,null),/*#__PURE__*/React.createElement(FavoriteBtn,{urlText:urlText,objDetail:objDetail,id:id})),/*#__PURE__*/React.createElement(IngredientsCheckbox,{objDetail:objDetail,id:id,url:urlText}),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"instructions\"},objDetail[0].strInstructions),/*#__PURE__*/React.createElement(ButtonFinish,{objDetail:objDetail}));};var render=function render(){var value=history.location.pathname;if(value.includes('comidas')){return renderFood();}if(value.includes('bebidas')){return renderDrink();}};return/*#__PURE__*/React.createElement(\"div\",null,loading?/*#__PURE__*/React.createElement(Loading,null):render());}export default DetalhesInProgress;","map":{"version":3,"sources":["/home/douglas/√Årea de Trabalho/Projetos em geral/App-Receitas/src/Pages/DetalhesInProgress.js"],"names":["React","useContext","useEffect","useState","useHistory","CopyToClipboard","Loading","RecipeContext","LinkCopiado","ButtonFinish","IngredientsCheckbox","FavoriteBtn","DetalhesInProgress","TWO_SECONDS","history","urlText","location","pathname","urlDetails","split","console","log","id","objDetail","setObjDetail","loading","setLoading","setCopied","requestByID","response","includes","fetch","json","responseJson","drinks","meals","setTimeout","handleCopied","renderDrink","strCategory","strAlcoholic","strDrink","strDrinkThumb","shareIcon","strInstructions","renderFood","strMeal","strMealThumb","render","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport '../styles/Detalhes.css';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport shareIcon from '../images/shareIcon.svg';\nimport Loading from '../components/Loading';\nimport RecipeContext from '../context/RecipeContext';\nimport LinkCopiado from '../components/LinkCopiado';\nimport ButtonFinish from '../components/ButtonFinish';\nimport IngredientsCheckbox from '../components/IngredientsCheckbox';\nimport FavoriteBtn from '../components/FavoriteBtn';\n\nfunction DetalhesInProgress() {\n  const TWO_SECONDS = 2000;\n  const history = useHistory();\n  const urlText = history.location.pathname;\n  const urlDetails = urlText.split('/in-progress');\n  console.log(urlDetails[0]);\n  const id = urlText.split('/')[2];\n  const [objDetail, setObjDetail] = useState([]);\n  const [loading, setLoading] = useState(true);\n  console.log(objDetail);\n\n  const { setCopied } = useContext(RecipeContext);\n\n  const requestByID = async () => {\n    let response = [];\n    if (urlText.includes('bebidas')) {\n      response = await fetch(`https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${id}`);\n      const responseJson = await response.json();\n      await setObjDetail(responseJson.drinks);\n    }\n    if (urlText.includes('comidas')) {\n      response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);\n      const responseJson = await response.json();\n      await setObjDetail(responseJson.meals);\n    }\n    setTimeout(() => {\n      setLoading(false);\n    }, TWO_SECONDS);\n  };\n\n  const handleCopied = () => {\n    setCopied(true);\n    setTimeout(() => {\n      setCopied(false);\n    }, TWO_SECONDS);\n  };\n\n  useEffect(() => {\n    requestByID();\n  }, []);\n\n  const renderDrink = () => (\n    <div className=\"details\">\n      <h1\n        data-testid=\"recipe-category\"\n      >\n        {`${objDetail[0].strCategory} (${objDetail[0].strAlcoholic})`}\n      </h1>\n      <h2 data-testid=\"recipe-title\">{objDetail[0].strDrink}</h2>\n      <img\n        data-testid=\"recipe-photo\"\n        className=\"food-image\"\n        src={ objDetail[0].strDrinkThumb }\n        alt={ objDetail[0].strDrink }\n      />\n      <div className=\"icons\">\n        <CopyToClipboard\n          text={ `http://localhost:3000${urlDetails[0]}` }\n          onCopy={ () => {\n            handleCopied();\n          } }\n        >\n          <input\n            type=\"image\"\n            data-testid=\"share-btn\"\n            src={ shareIcon }\n            alt={ objDetail[0].strDrink }\n          />\n        </CopyToClipboard>\n        <LinkCopiado />\n        <FavoriteBtn urlText={ urlText } objDetail={ objDetail } id={ id } />\n      </div>\n      <IngredientsCheckbox objDetail={ objDetail } id={ id } url={ urlText } />\n      <p data-testid=\"instructions\">{objDetail[0].strInstructions}</p>\n      <ButtonFinish objDetail={ objDetail } />\n    </div>\n\n  );\n\n  const renderFood = () => (\n    <div className=\"details\">\n      <h1 data-testid=\"recipe-category\">{objDetail[0].strCategory}</h1>\n      <h2 data-testid=\"recipe-title\">{objDetail[0].strMeal}</h2>\n      <img\n        data-testid=\"recipe-photo\"\n        src={ objDetail[0].strMealThumb }\n        alt={ objDetail[0].strMeal }\n      />\n      <div className=\"icons\">\n        <CopyToClipboard\n          text={ `http://localhost:3000${urlDetails[0]}` }\n          onCopy={ () => {\n            handleCopied();\n          } }\n        >\n          <input\n            type=\"image\"\n            data-testid=\"share-btn\"\n            src={ shareIcon }\n            alt={ objDetail[0].strMeal }\n          />\n        </CopyToClipboard>\n        <LinkCopiado />\n        <FavoriteBtn urlText={ urlText } objDetail={ objDetail } id={ id } />\n      </div>\n      <IngredientsCheckbox objDetail={ objDetail } id={ id } url={ urlText } />\n      <p data-testid=\"instructions\">{objDetail[0].strInstructions}</p>\n      <ButtonFinish objDetail={ objDetail } />\n    </div>\n\n  );\n\n  const render = () => {\n    const value = history.location.pathname;\n    if (value.includes('comidas')) {\n      return renderFood();\n    }\n    if (value.includes('bebidas')) {\n      return renderDrink();\n    }\n  };\n\n  return (\n    <div>\n      {loading ? <Loading /> : render()}\n    </div>\n  );\n}\n\nexport default DetalhesInProgress;\n"]},"metadata":{},"sourceType":"module"}