{"ast":null,"code":"import _regeneratorRuntime from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import RecipeContext from'../../context/RecipeContext';import Header from'../../components/Header';import Footer from'../../components/Footer';function ExplorarBebidasIngredientes(_ref){var history=_ref.history;var _useContext=useContext(RecipeContext),setMeals=_useContext.setMeals,setIsDrinkLoading=_useContext.setIsDrinkLoading,setCameFromIngredients=_useContext.setCameFromIngredients;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ingredientes=_useState2[0],setIngredientes=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var TWELVE_INGREDIENTS=12;var fetchIngredients=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result,finalResults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://www.thecocktaildb.com/api/json/v1/1/list.php?i=list');case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;finalResults=result.drinks.filter(function(elem,index){if(index<TWELVE_INGREDIENTS){return elem;}return'';});setIngredientes(finalResults);setLoading(false);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchIngredients(){return _ref2.apply(this,arguments);};}();var fetchAndRedirect=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3){var target,ingredientName;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:target=_ref3.target;setIsDrinkLoading(true);setCameFromIngredients(true);ingredientName=target.parentNode.firstChild.innerText;console.log(ingredientName);fetch(\"https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=\".concat(ingredientName)).then(function(response){return response.json();}).then(function(data){return setMeals(data.drinks);}).then(function(){return history.push('/bebidas');}).then(function(){setIsDrinkLoading(false);setCameFromIngredients(true);});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchAndRedirect(_x){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchIngredients();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"explore-big per-ingredients\"},/*#__PURE__*/React.createElement(Header,{title:\"Explorar Ingredientes\",search:false}),/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},!loading&&ingredientes.map(function(elem,index){return/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\".concat(index,\"-checkbox\"),key:\"\".concat(elem.idIngredient1,\", \").concat(index,\" \")},/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(elem.idIngredient1,\", \").concat(index,\" \"),\"data-testid\":\"\".concat(index,\"-ingredient-card\")},/*#__PURE__*/React.createElement(\"h5\",{\"data-testid\":\"\".concat(index,\"-card-name\")},elem.strIngredient1),/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"\".concat(index,\"-card-img\"),src:\"https://www.thecocktaildb.com/images/ingredients/\".concat(elem.strIngredient1,\"-Small.png\"),alt:elem.strIngredient1})),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",id:\"\".concat(index,\"-checkbox\"),onChange:fetchAndRedirect}));})),/*#__PURE__*/React.createElement(Footer,null));}export default ExplorarBebidasIngredientes;","map":{"version":3,"sources":["/home/douglas/Área de Trabalho/Projetos em geral/App-Receitas/src/Pages/Explorar/ExplorarBebidasIngredientes.js"],"names":["React","useEffect","useState","useContext","RecipeContext","Header","Footer","ExplorarBebidasIngredientes","history","setMeals","setIsDrinkLoading","setCameFromIngredients","ingredientes","setIngredientes","loading","setLoading","TWELVE_INGREDIENTS","fetchIngredients","fetch","response","json","result","finalResults","drinks","filter","elem","index","fetchAndRedirect","target","ingredientName","parentNode","firstChild","innerText","console","log","then","data","push","map","idIngredient1","strIngredient1"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport RecipeContext from '../../context/RecipeContext';\nimport Header from '../../components/Header';\nimport Footer from '../../components/Footer';\n\nfunction ExplorarBebidasIngredientes({ history }) {\n  const {\n    setMeals, setIsDrinkLoading, setCameFromIngredients } = useContext(RecipeContext);\n  const [ingredientes, setIngredientes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const TWELVE_INGREDIENTS = 12;\n\n  const fetchIngredients = async () => {\n    const response = await fetch('https://www.thecocktaildb.com/api/json/v1/1/list.php?i=list');\n    const result = await response.json();\n    const finalResults = result.drinks.filter((elem, index) => {\n      if (index < TWELVE_INGREDIENTS) {\n        return elem;\n      }\n      return '';\n    });\n    setIngredientes(finalResults);\n    setLoading(false);\n  };\n\n  const fetchAndRedirect = async ({ target }) => {\n    setIsDrinkLoading(true);\n    setCameFromIngredients(true);\n    const ingredientName = target.parentNode.firstChild.innerText;\n    console.log(ingredientName);\n    fetch(`https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=${ingredientName}`)\n      .then((response) => response.json())\n      .then((data) => setMeals(data.drinks))\n      .then(() => history.push('/bebidas'))\n      .then(() => {\n        setIsDrinkLoading(false);\n        setCameFromIngredients(true);\n      });\n  };\n\n  useEffect(() => {\n    fetchIngredients();\n  }, []);\n\n  return (\n    <div className=\"explore-big per-ingredients\">\n      <Header title=\"Explorar Ingredientes\" search={ false } />\n      <div className=\"list\">\n\n        {!loading && ingredientes.map((elem, index) => (\n          <label\n            htmlFor={ `${index}-checkbox` }\n            key={ `${elem.idIngredient1}, ${index} ` }\n          >\n            <div\n              key={ `${elem.idIngredient1}, ${index} ` }\n              data-testid={ `${index}-ingredient-card` }\n            >\n              <h5 data-testid={ `${index}-card-name` }>\n                {elem.strIngredient1}\n              </h5>\n              <img\n                data-testid={ `${index}-card-img` }\n                src={ `https://www.thecocktaildb.com/images/ingredients/${elem.strIngredient1}-Small.png` }\n                alt={ elem.strIngredient1 }\n              />\n            </div>\n            <input\n              type=\"checkbox\"\n              id={ `${index}-checkbox` }\n              onChange={ fetchAndRedirect }\n            />\n          </label>\n        ))}\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n\nExplorarBebidasIngredientes.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n};\n\nexport default ExplorarBebidasIngredientes;\n"]},"metadata":{},"sourceType":"module"}