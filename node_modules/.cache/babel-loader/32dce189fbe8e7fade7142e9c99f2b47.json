{"ast":null,"code":"var _jsxFileName = \"/home/douglas/\\xC1rea de Trabalho/Trybe/trybe-exercises/Projetos/FrontEnd/sd-08-project-recipes-app/src/components/FavoriteBtn.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\nimport setFavoritos, { isfavoriteRecipe } from '../services/setFavoritos';\nimport getInformation from '../services/getInformation';\nimport RecipeContext from '../context/RecipeContext';\n\nfunction FavoriteBtn({\n  objDetail,\n  urlText,\n  id\n}) {\n  const [isFavorite, setIsFavorite] = useState(false);\n  const {\n    receitasFav,\n    setReceitasFav\n  } = useContext(RecipeContext);\n  const history = useHistory();\n  const currentUrl = history.location.pathname;\n  useEffect(() => {\n    isfavoriteRecipe(id, setIsFavorite);\n  }, []);\n\n  const removeFavorite = () => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const updatedFavorites = favoriteRecipes.filter(elem => elem.id !== id);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(updatedFavorites));\n    isfavoriteRecipe(id, setIsFavorite);\n  };\n\n  const onClickFavorite = () => {\n    if (isFavorite === true) {\n      return removeFavorite();\n    }\n\n    return setFavoritos(objDetail[0], urlText, id, setIsFavorite);\n  };\n\n  const updateFav = () => {\n    if (currentUrl.includes('receitas-favoritas')) {\n      const filtered = receitasFav.filter(elem => elem.id !== id);\n      setReceitasFav(filtered);\n      setIsFavorite(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"input\", {\n    className: \"favorite-btn\",\n    onClick: () => {\n      onClickFavorite();\n      updateFav();\n    },\n    type: \"image\",\n    \"data-testid\": \"favorite-btn\",\n    src: isFavorite ? blackHeartIcon : whiteHeartIcon,\n    alt: \"foto do item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  });\n}\n\nFavoriteBtn.propTypes = {\n  objDetail: PropTypes.shape(PropTypes.any).isRequired,\n  urlText: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired\n};\nexport default FavoriteBtn;","map":{"version":3,"sources":["/home/douglas/Área de Trabalho/Trybe/trybe-exercises/Projetos/FrontEnd/sd-08-project-recipes-app/src/components/FavoriteBtn.js"],"names":["React","useState","useEffect","useContext","PropTypes","useHistory","setFavoritos","isfavoriteRecipe","getInformation","RecipeContext","FavoriteBtn","objDetail","urlText","id","isFavorite","setIsFavorite","receitasFav","setReceitasFav","history","currentUrl","location","pathname","removeFavorite","favoriteRecipes","JSON","parse","localStorage","getItem","updatedFavorites","filter","elem","setItem","stringify","onClickFavorite","updateFav","includes","filtered","blackHeartIcon","whiteHeartIcon","propTypes","shape","any","isRequired","string"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,cAA3B;;;AAGA,OAAOC,YAAP,IAAuBC,gBAAvB,QAA+C,0BAA/C;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,aAAP,MAA0B,0BAA1B;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,OAAb;AAAsBC,EAAAA;AAAtB,CAArB,EAAiD;AAC/C,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8Bd,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM;AAAEe,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAkCd,UAAU,CAACM,aAAD,CAAlD;AAEA,QAAMS,OAAO,GAAGb,UAAU,EAA1B;AACA,QAAMc,UAAU,GAAGD,OAAO,CAACE,QAAR,CAAiBC,QAApC;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACdK,IAAAA,gBAAgB,CAACM,EAAD,EAAKE,aAAL,CAAhB;AACD,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMO,cAAc,GAAG,MAAM;AAC3B,UAAMC,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,CAAxB;AACA,UAAMC,gBAAgB,GAAGL,eAAe,CAACM,MAAhB,CAAwBC,IAAD,IAAUA,IAAI,CAACjB,EAAL,KAAYA,EAA7C,CAAzB;AACAa,IAAAA,YAAY,CAACK,OAAb,CAAqB,iBAArB,EAAwCP,IAAI,CAACQ,SAAL,CAAeJ,gBAAf,CAAxC;AACArB,IAAAA,gBAAgB,CAACM,EAAD,EAAKE,aAAL,CAAhB;AACD,GALD;;AAOA,QAAMkB,eAAe,GAAG,MAAM;AAC5B,QAAInB,UAAU,KAAK,IAAnB,EAAyB;AACvB,aAAOQ,cAAc,EAArB;AACD;;AACD,WAAOhB,YAAY,CAACK,SAAS,CAAC,CAAD,CAAV,EAAeC,OAAf,EAAwBC,EAAxB,EAA4BE,aAA5B,CAAnB;AACD,GALD;;AAOA,QAAMmB,SAAS,GAAG,MAAM;AACtB,QAAIf,UAAU,CAACgB,QAAX,CAAoB,oBAApB,CAAJ,EAA+C;AAC7C,YAAMC,QAAQ,GAAGpB,WAAW,CAACa,MAAZ,CAAoBC,IAAD,IAAUA,IAAI,CAACjB,EAAL,KAAYA,EAAzC,CAAjB;AACAI,MAAAA,cAAc,CAACmB,QAAD,CAAd;AACArB,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,GAND;;AAQA,sBACE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,OAAO,EAAG,MAAM;AAAEkB,MAAAA,eAAe;AAAIC,MAAAA,SAAS;AAAK,KAFrD;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,mBAAY,cAJd;AAKE,IAAA,GAAG,EAAGpB,UAAU,GAAGuB,cAAH,GAAoBC,cALtC;AAME,IAAA,GAAG,EAAC,cANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAUD;;AAED5B,WAAW,CAAC6B,SAAZ,GAAwB;AACtB5B,EAAAA,SAAS,EAAEP,SAAS,CAACoC,KAAV,CACTpC,SAAS,CAACqC,GADD,EAETC,UAHoB;AAItB9B,EAAAA,OAAO,EAAER,SAAS,CAACuC,MAAV,CAAiBD,UAJJ;AAKtB7B,EAAAA,EAAE,EAAET,SAAS,CAACuC,MAAV,CAAiBD;AALC,CAAxB;AAQA,eAAehC,WAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport setFavoritos, { isfavoriteRecipe } from '../services/setFavoritos';\nimport getInformation from '../services/getInformation';\nimport RecipeContext from '../context/RecipeContext';\n\nfunction FavoriteBtn({ objDetail, urlText, id }) {\n  const [isFavorite, setIsFavorite] = useState(false);\n  const { receitasFav, setReceitasFav } = useContext(RecipeContext);\n\n  const history = useHistory();\n  const currentUrl = history.location.pathname;\n\n  useEffect(() => {\n    isfavoriteRecipe(id, setIsFavorite);\n  }, []);\n\n  const removeFavorite = () => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const updatedFavorites = favoriteRecipes.filter((elem) => elem.id !== id);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(updatedFavorites));\n    isfavoriteRecipe(id, setIsFavorite);\n  };\n\n  const onClickFavorite = () => {\n    if (isFavorite === true) {\n      return removeFavorite();\n    }\n    return setFavoritos(objDetail[0], urlText, id, setIsFavorite);\n  };\n\n  const updateFav = () => {\n    if (currentUrl.includes('receitas-favoritas')) {\n      const filtered = receitasFav.filter((elem) => elem.id !== id);\n      setReceitasFav(filtered);\n      setIsFavorite(true);\n    }\n  };\n\n  return (\n    <input\n      className=\"favorite-btn\"\n      onClick={ () => { onClickFavorite(); updateFav(); } }\n      type=\"image\"\n      data-testid=\"favorite-btn\"\n      src={ isFavorite ? blackHeartIcon : whiteHeartIcon }\n      alt=\"foto do item\"\n    />\n  );\n}\n\nFavoriteBtn.propTypes = {\n  objDetail: PropTypes.shape(\n    PropTypes.any,\n  ).isRequired,\n  urlText: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n};\n\nexport default FavoriteBtn;\n"]},"metadata":{},"sourceType":"module"}