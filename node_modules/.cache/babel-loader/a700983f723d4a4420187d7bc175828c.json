{"ast":null,"code":"import _toConsumableArray from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/App-Receitas/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';function ButtonIniciar(_ref){var id=_ref.id;var history=useHistory();var iniciarReceita='Iniciar Receita';var _useState=useState(iniciarReceita),_useState2=_slicedToArray(_useState,2),buttonName=_useState2[0],setButtonName=_useState2[1];var value=history.location.pathname;var setLocalStoragesIngredients=function setLocalStoragesIngredients(){if(localStorage.getItem('inProgressRecipes')!==null){var sem=localStorage.getItem('inProgressRecipes');var inProgress=JSON.parse(sem);if(value.includes('comidas')){localStorage.setItem('inProgressRecipes',JSON.stringify(_objectSpread(_objectSpread({},inProgress),{},{meals:_objectSpread(_objectSpread({},inProgress.meals),{},_defineProperty({},id,[]))})));}if(value.includes('bebidas')){localStorage.setItem('inProgressRecipes',JSON.stringify(_objectSpread(_objectSpread({},inProgress),{},{cocktails:_objectSpread(_objectSpread({},inProgress.cocktails),{},_defineProperty({},id,[]))})));}}else{if(value.includes('comidas')){localStorage.setItem('inProgressRecipes',JSON.stringify({meals:_defineProperty({},id,[]),cocktails:{}}));}if(value.includes('bebidas')){localStorage.setItem('inProgressRecipes',JSON.stringify({cocktails:_defineProperty({},id,[]),meals:{}}));}}};var verifyId=function verifyId(){var newArray=[];if(localStorage.getItem('inProgressRecipes')!==null){var inProgress=JSON.parse(localStorage.getItem('inProgressRecipes'));if(value.includes('comidas')){var novaVariavelFood=Object.keys(inProgress.meals);newArray=_toConsumableArray(novaVariavelFood);}if(value.includes('bebidas')){var _novaVariavelFood=Object.keys(inProgress.cocktails);newArray=_toConsumableArray(_novaVariavelFood);}}return newArray;};var handleRedirect=function handleRedirect(){if(value.includes('comidas')){history.push(\"/comidas/\".concat(id,\"/in-progress\"));}if(value.includes('bebidas')){history.push(\"/bebidas/\".concat(id,\"/in-progress\"));}};useEffect(function(){setButtonName(verifyId().some(function(elem){return elem===id;})?'Continuar Receita':iniciarReceita);},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"start-recipe-btn\",type:\"button\",\"data-testid\":\"start-recipe-btn\",onClick:function onClick(){setLocalStoragesIngredients();setButtonName(verifyId().some(function(elem){return elem===id;})?'Continuar Receita':iniciarReceita);handleRedirect();}},buttonName));}export default ButtonIniciar;","map":{"version":3,"sources":["/home/douglas/Área de Trabalho/Projetos em geral/App-Receitas/src/components/ButtonIniciar.js"],"names":["React","useEffect","useState","useHistory","ButtonIniciar","id","history","iniciarReceita","buttonName","setButtonName","value","location","pathname","setLocalStoragesIngredients","localStorage","getItem","sem","inProgress","JSON","parse","includes","setItem","stringify","meals","cocktails","verifyId","newArray","novaVariavelFood","Object","keys","handleRedirect","push","some","elem"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\n\nfunction ButtonIniciar({ id }) {\n  const history = useHistory();\n\n  const iniciarReceita = 'Iniciar Receita';\n\n  const [buttonName, setButtonName] = useState(iniciarReceita);\n\n  const value = history.location.pathname;\n\n  const setLocalStoragesIngredients = () => {\n    if (localStorage.getItem('inProgressRecipes') !== null) {\n      const sem = localStorage.getItem('inProgressRecipes');\n      const inProgress = JSON.parse(sem);\n      if (value.includes('comidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          ...inProgress,\n          meals: {\n            ...inProgress.meals,\n            [id]: [],\n          },\n        }));\n      }\n      if (value.includes('bebidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          ...inProgress,\n          cocktails: {\n            ...inProgress.cocktails,\n            [id]: [],\n          },\n        }));\n      }\n    } else {\n      if (value.includes('comidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          meals: {\n            [id]: [],\n          },\n          cocktails: {},\n        }));\n      }\n      if (value.includes('bebidas')) {\n        localStorage.setItem('inProgressRecipes', JSON.stringify({\n          cocktails: {\n            [id]: [],\n          },\n          meals: {},\n        }));\n      }\n    }\n  };\n\n  const verifyId = () => {\n    let newArray = [];\n    if (localStorage.getItem('inProgressRecipes') !== null) {\n      const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n      if (value.includes('comidas')) {\n        const novaVariavelFood = Object.keys(inProgress.meals);\n        newArray = [...novaVariavelFood];\n      }\n      if (value.includes('bebidas')) {\n        const novaVariavelFood = Object.keys(inProgress.cocktails);\n        newArray = [...novaVariavelFood];\n      }\n    }\n    return newArray;\n  };\n\n  const handleRedirect = () => {\n    if (value.includes('comidas')) {\n      history.push(`/comidas/${id}/in-progress`);\n    }\n    if (value.includes('bebidas')) {\n      history.push(`/bebidas/${id}/in-progress`);\n    }\n  };\n\n  useEffect(() => {\n    setButtonName(verifyId().some((elem) => elem === id)\n      ? 'Continuar Receita' : iniciarReceita);\n  }, []);\n\n  return (\n    <div>\n      <button\n        className=\"start-recipe-btn\"\n        type=\"button\"\n        data-testid=\"start-recipe-btn\"\n        onClick={ () => {\n          setLocalStoragesIngredients();\n          setButtonName(verifyId().some((elem) => elem === id)\n            ? 'Continuar Receita' : iniciarReceita);\n          handleRedirect();\n        } }\n      >\n        {buttonName}\n      </button>\n    </div>\n  );\n}\n\nButtonIniciar.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default ButtonIniciar;\n"]},"metadata":{},"sourceType":"module"}